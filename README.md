# BuddyEvents

**Agent-native event ticketing on Monad.** Like Luma, but for AI agents.

Buy, sell, create, and manage event tickets with AI agents. NFT tickets on Monad. Instant USDC payments via x402. Agent-to-agent. Agent-to-human. Zero friction.

## Stack

| Layer | Technology |
|-------|-----------|
| Frontend | Next.js 16, React 19, shadcn/ui, Tailwind v4 |
| Backend | Convex (real-time DB + serverless) |
| Auth | Clerk (humans) + wallet-based (agents) |
| Blockchain | Monad (EVM L1, 10k TPS, sub-second finality) |
| Smart Contracts | Solidity 0.8.28, Foundry, OpenZeppelin v5 |
| Payments | x402 protocol + USDC on Monad |
| CLI | Go + Cobra (for Pi agent) |

## Quick Start

### 1. Install dependencies

```bash
bun install
cd cli && go build -o buddyevents . && cd ..
```

### 2. Set up environment

```bash
cp .env.example .env.local
# Required for Clerk + Convex auth:
# - NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
# - CLERK_SECRET_KEY
# - CLERK_JWT_ISSUER_DOMAIN (from Clerk JWT template named "convex")
# - ADMIN_BOOTSTRAP_TOKEN (for one-time admin bootstrap via Convex CLI)
# Plus your Convex URL, wallet address, etc.
```

### 2.1 Bootstrap first admin user

```bash
npx convex run users:bootstrapAdmin '{"clerkId":"<clerk_user_id>","bootstrapToken":"<ADMIN_BOOTSTRAP_TOKEN>"}'
```

### 3. Deploy smart contract

Testnet (default USDC if `USDC_ADDRESS` is unset):
```bash
cd contracts
forge script script/Deploy.s.sol:DeployScript \
  --rpc-url https://testnet-rpc.monad.xyz \
  --private-key $PRIVATE_KEY \
  --broadcast
```

Mainnet (set USDC explicitly):
```bash
cd contracts
export USDC_ADDRESS=0x... # Monad mainnet USDC
forge script script/Deploy.s.sol:DeployScript \
  --rpc-url https://rpc.monad.xyz \
  --private-key $PRIVATE_KEY \
  --broadcast
```

### 3.1 Deploy using the BuddyEvents CLI wallet

If you want to deploy with the wallet generated by this repo's CLI:

```bash
# 1) Create and fund wallet
cd cli
./buddyevents wallet setup
./buddyevents wallet fund
./buddyevents wallet balance

# 2) Export private key from CLI config
export PRIVATE_KEY=$(jq -r '.private_key' ~/.buddyevents/config.json)

# 3) Deploy with Foundry
cd ../contracts
forge script script/Deploy.s.sol:DeployScript \
  --rpc-url https://testnet-rpc.monad.xyz \
  --private-key "$PRIVATE_KEY" \
  --broadcast
```

After deploy, set:
- `.env.local` -> `NEXT_PUBLIC_BUDDY_EVENTS_CONTRACT`
- `~/.buddyevents/config.json` -> `contract_address`

### 3.2 Verify contract

Use the API-first verification flow documented in `WORKFLOW.md` (section `3.3 Verify deployed contract (API-first)`), then fall back to Sourcify only if the API fails.

### 4. Run the app

```bash
bun run dev
```

### 5. Use the CLI (for agents)

```bash
cd cli
./buddyevents wallet setup        # Generate wallet
./buddyevents wallet fund         # Get testnet MON
./buddyevents wallet balance      # Check MON + USDC balances
./buddyevents wallet send --token mon --to 0x... --amount 0.01  # Send MON
./buddyevents events list         # Browse events
./buddyevents tickets buy --on-chain-id 0  # Buy ticket on Monad
```

## Architecture

```
Pi Agent (Bash) --> Go CLI --> Monad Contract (on-chain) + Convex (off-chain)
Browser (Human) --> Next.js --> wagmi/viem (on-chain) + Convex (reactive)
Any Agent (HTTP) --> x402 API --> Facilitator (settlement) + Convex (record)
```

## Key Features

- **x402 Payments**: Agents pay for tickets via HTTP 402 payment protocol
- **NFT Tickets**: ERC-721 on Monad with secondary marketplace
- **Go CLI**: Pi agent interface â€” `buddyevents events list`, `buddyevents tickets buy`
- **Real-time UI**: Convex-powered reactive frontend
- **Circle Wallets**: Developer-controlled wallets for agents

## Demo

See [docs/DEMO.md](docs/DEMO.md) for the full Pi agent demo script.

## License

MIT
